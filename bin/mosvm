#!/bin/sh

# This script only works as well as your OS's which command.. Which, on most
# platforms, is not at all.

if which guile; then USE_GUILE=1; elif which mzscheme; then USE_MZSCHEME=1; fi
if which gmake; then make=gmake; else make=make; fi

export USE_GUILE USE_MZSCHEME

act=run
args=
progn=
make=make

if [ $# -gt 0 ]; then

while [ $# -gt 0 ]; do
if [ x$1 = x-d ]; then
    act=debug
elif [ x$progn = x ]; then
    progn=$1
else
    args="$args $1"
fi
shift
done

exec $make $act p=$progn "a=$args"

else

if which rlwrap; then 
rlwrap gmake run p=examples/repl
else
gmake run p=examples/repl
fi

fi
